/*!
 * JSMovieclip V1.0
 * https://github.com/jeremypetrequin/jsMovieclip
 * Copyright 2013 Jeremy Petrequin
 * Released under the MIT license
 * https://github.com/jeremypetrequin/jsMovieclip/blob/master/MIT-license.txt
 */
(function(){function b(h,f){if(!h){return this;
}var a=this,g=h.toString();a.elmts=g==="[object Array]"||g==="[object NodeList]"||g==="[object HTMLCollection]"||g==="[object Object]"?h:[h];g=null;a.playing=false;
a.framerate=f.framerate||25;a.frames=[];a.loop=false;a.elmtsLength=a.elmts.length;a.stopCallback=f.stopCallback||null;a.firstFrame=1;a.lastFrame=1;a._label="";
a._idx=0;a._timer=null;a._tmpFrames=[];a._way=1;a._framesNumber=f.frames_number||0;a.updateFrames(f.frames,f.direction,f.width,f.height,f.frames_number);
}b.prototype={_render:function(){var d=this.elmtsLength,a=this;while(d--){this.elmts[d].style.backgroundPosition=this._tmpFrames[this._idx];}if(a.playing){if(a._idx>=a.lastFrame-1){if(!a.loop){a.stop();
return;}a._idx=a.firstFrame-1;}else{a._idx++;}}},_enterFrame:function(){var a=this;a._render.call(a);if(a.playing){a._timer=setTimeout(function(){a._enterFrame.call(a);
},1000/a.framerate);}},_calculateFrames:function(){this._tmpFrames=[];if(this._way===1){this._tmpFrames=this.frames;}else{var a=this.frames.length;while(a--){this._tmpFrames.push(this.frames[a]);
}}this._framesNumber=this.frames.length;return this.clearLoopBetween();},_cacheFrames:function(){var d=this.frames,a=d.length;this.frames=[];while(a--){this.frames[a]="-"+d[a].x+"px -"+d[a].y+"px";
}return this;},updateFrames:function(h,i,j,a,l){if(h){this.frames=h;return this._cacheFrames()._calculateFrames();}if(!h&&!i){throw"JSMovieclip need at least frames array or a direction ";
}if(i==="v"&&!a){throw"If you want to use a vertical sprite, JSMoviclip need a height";}if(i==="h"&&!j){throw"If you want to use a horizontal sprite, JSMoviclip need a width";
}if(!l){throw"If you want to use a horizontal of vertical sprite, JSMoviclip need a number of frame";}var k=0;for(;k<l;k++){this.frames.push({x:(i==="h"?k*j:0),y:(i==="v"?k*a:0)});
}k=null;return this._cacheFrames()._calculateFrames();},getWay:function(){return this._way;},changeWay:function(d,a){if(d===this._way){return this;}a=!!a;
if(a===true){this._idx=this._framesNumber-this._idx;}this._way=d;return this._calculateFrames();},clearLoopBetween:function(){this.firstFrame=1;this.lastFrame=this._framesNumber;
return this;},loopBetween:function(d,a){if(d>=a){d=a;throw"Firstframe and lastframe are equals or inverted";}this.firstFrame=Math.max(d,1);this.lastFrame=Math.min(a,this._framesNumber);
if(this._idx<this.firstFrame-1||this._idx>this.lastFrame-1){this._idx=this.firstFrame-1;}return this;},currentFrame:function(){return this._idx+1;},prevFrame:function(){var a=this.currentFrame();
return this.gotoAndStop(a<=this.firstFrame?this.lastFrame:a-1);},nextFrame:function(){var a=this.currentFrame();return this.gotoAndStop(a>=this.lastFrame?1:a+1);
},toggle:function(a){return !this.playing?this.play(a):this.stop();},play:function(a){if(this.playing){return this;}if(this._idx===this.lastFrame-1){this._idx=this.firstFrame-1;
}this.playing=true;this.loop=!!a;this._enterFrame();return this;},stop:function(){this.playing=false;if(this._timer){clearTimeout(this._timer);this._timer=null;
}if(this.stopCallback){this.stopCallback();}return this;},gotoAndPlay:function(d,a){this._idx=Math.min(Math.max(d,this.firstFrame),this.lastFrame)-1;return this.play(a);
},gotoAndStop:function(a){this._idx=Math.min(Math.max(a,this.firstFrame),this.lastFrame)-1;this.loop=false;this.playing=false;this._enterFrame();return this;
}};window.JSMovieclip=b;})();